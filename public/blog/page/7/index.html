
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>My Octopress Blog</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="&#8220;I&#8217;m so extremely sad that Yar is dead. I liked her a lot! That skin of evil was a messed-up idiot. Picard was pretty smart to get him &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://yoursite.com/blog/page/7/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="My Octopress Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">My Octopress Blog</a></h1>
  
    <h2>A blogging framework for hackers.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:yoursite.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/10/s1e24-skin-of-evil/">S1:E24 - Skin of Evil</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-10T00:00:00-05:00" pubdate data-updated="true">Nov 10<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&#8220;I&#8217;m so extremely sad that Yar is dead. I liked her a lot! That skin of evil was a messed-up idiot. Picard was pretty smart to get him mad so they could beam. I bet there will be a new character. The end was too sappy. They should&#8217;ve just said she was moved to a new ship instead of killing her!&#8221;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/10/s1e23-symbiosis/">S1:E23 - Symbiosis</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-10T00:00:00-05:00" pubdate data-updated="true">Nov 10<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&#8220;The drug people, they were obsessed with drugs. The rich planet was mean and they didn&#8217;t tell the poor planet that they weren&#8217;t sick any more. I don&#8217;t like that they did that. The crew gave them the drug but they didn&#8217;t give them the ship repairing things. I think the poor planet is going to get better and then they&#8217;ll learn how to build their own stuff and fix ships. Hopefully the rich planet will learn not to be mean.&#8221;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/05/s1e22-the-arsenal-of-freedom/">S1:E22 - the Arsenal of Freedom</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-05T00:00:00-04:00" pubdate data-updated="true">Nov 5<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&#8220;That one had the crazy droid things trying to kill everyone. The crazy droid things wiped everyone out on the planet. They separated the saucer and Jordi took over the ship. Why was that guy disagreeing with Jordi? He was a jerk.&#8221;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/05/s1e21-heart-of-glory/">S1:E21 - Heart of Glory</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-05T00:00:00-04:00" pubdate data-updated="true">Nov 5<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&#8220;The Klingons tricked Warf but he ended up figuring it out in the end.&#8221;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/10/24/fulltext-wildcard-searching-with-rubyrails-and-sunspot/">Fulltext Wildcard Searching With Ruby/rails and Sunspot</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-24T00:00:00-04:00" pubdate data-updated="true">Oct 24<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I love <a href="http://outoftime.github.com/sunspot/" title="Sunspot">Sunspot</a> for full-text searching in Rails apps, but it took me a while to figure out how to do left-bound wildcard searching in full-text indexed fields.</p>

<p>So - if we&#8217;re searching for &#8220;collis&#8221; in a set of fulltext indexed fields, in the default solr config supplied by sunspot you have to search for the entire word. To get &#8220;colli&#8221; or &#8220;coll&#8221; to return records with &#8220;collis&#8221; in the fulltext index, you just need to modify the solr config (in <strong>$RAILS_ROOT/solr/conf/schema.xml</strong>), changing:</p>

<pre>
<fieldType name="text" class="solr.TextField" omitNorms="false">
  <analyzer>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StandardFilterFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType>
</pre>


<p>to:</p>

<pre>
<fieldType name="text" class="solr.TextField" omitNorms="false">
  <analyzer type="index">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="50" side="front"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType>
</pre>


<p>which essentially makes the full text tokenizer create left-bound <a href="http://en.wikipedia.org/wiki/N-gram">n-grams</a> for indexed terms. This taught me:</p>

<ol>
<li>Solr/lucene/sunspot rock, and</li>
<li>I have more to learn about solr config because the schema.xml looks like it exposes some very powerful search juju.</li>
</ol>


<p>Thanks to Arndt Lehmann&#8217;s tip on <a href="http://railscasts.com/episodes/278-search-with-sunspot?view=comments">this</a> page.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/10/21/s1e20-coming-of-age/">S1:E20 - Coming of Age</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-21T00:00:00-04:00" pubdate data-updated="true">Oct 21<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&#8220;Sort of boring, except for the test that Wesley was going through. His last test was weird, the last guy just got up and walked away.  It was cute that Remick wanted to be on the Enterprise after his investigation.&#8221;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/10/21/s1e19-home-soil/">S1:E19 - Home Soil</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-21T00:00:00-04:00" pubdate data-updated="true">Oct 21<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&#8220;UGLY BAGS OF MOSTLY WATER was really funny. These little cell things were trying to take over the ship because the people on the planet were destroying them. Data was dodging the laser - it was so cool.&#8221;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/10/14/s1e18-when-the-bough-breaks/">S1:E18 - When the Bough Breaks</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-14T00:00:00-04:00" pubdate data-updated="true">Oct 14<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&#8220;Their transporter is a lot quicker. Are they going to destroy the power source? Wesley was brave. They must&#8217;ve been extremely smart even though their scientists forgot.&#8221;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/10/14/s1e17-too-short-a-season/">S1:E17 - Too Short a Season</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-14T00:00:00-04:00" pubdate data-updated="true">Oct 14<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&#8220;I was hoping he&#8217;d turn into a baby. He was getting all sweaty as he got younger. He started a war by giving weapons to everyone but in the end he felt bad.&#8221;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/10/13/figuring-out-whats-behind-a-listening-process-without-a-program-pid/">Figuring Out What&#8217;s Behind a Listening Process Without a Program / Pid.</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-10-13T00:00:00-04:00" pubdate data-updated="true">Oct 13<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Say you&#8217;re being a good sysadmin and you&#8217;re checking out listeners on your machines:</p>

<pre>
root@deathstar:~# netstat -pant | grep LISTEN
tcp        0      0 127.0.0.1:873           0.0.0.0:*               LISTEN      3947/rsync      
tcp        0      0 0.0.0.0:8649            0.0.0.0:*               LISTEN      3826/gmond      
tcp        0      0 192.168.10.122:9102     0.0.0.0:*               LISTEN      4167/bacula-fd  
tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      3229/portmap    
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      3468/sshd       
tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      3930/master     
tcp        0      0 0.0.0.0:44572           0.0.0.0:*               LISTEN      -               
tcp        0      0 0.0.0.0:34271           0.0.0.0:*               LISTEN      3247/rpc.statd  
tcp6       0      0 :::22                   :::*                    LISTEN      3468/sshd       
</pre>


<p>lolwut is listening on 44572 ?</p>

<pre>
 lsof -i -n -P | grep 44572
</pre>


<p>returns nothing! IT MUST BE A ROOTKIT!!eleventy!!!</p>

<p>Wait - maybe portmapper has assigned it to a kernel-level server?</p>

<pre>
root@deathstar:~# pmap_dump
    100000    2   tcp    111  portmapper
    100000    2   udp    111  portmapper
    100024    1   udp  44915  status
    100024    1   tcp  34271  status
    100021    1   tcp  44572  nlockmgr
    100021    3   tcp  44572  nlockmgr
    100021    4   tcp  44572  nlockmgr
</pre>


<p>Whew- it&#8217;s nlockmgr, part of nfs file locking.</p>

<p>So the moral of the story - just because netstat can&#8217;t determine a program or pid doesn&#8217;t mean you&#8217;re in trouble. Check portmapper&#8217;s assignments via pmap_dump first, as it might be innocuous.</p>

<p>Apparently netstat can be made aware of portmapper assignments, but it doesn&#8217;t appear it is aware of kernel level services - or - it just doesn&#8217;t work for me.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/8/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/6/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/08/19/new-post/">A new octopress blog</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/18/wrap-up-of-my-first-week-at-thoughtbot/">Wrap-up of my first week at thoughtbot</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/30/s3e17-sins-of-the-father/">S3:E17 - Sins of the Father</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/30/s3e16-the-offspring/">S3:E16 - The Offspring</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/30/s318-allegiance/">S3:18 - Allegiance</a>
      </li>
    
  </ul>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
