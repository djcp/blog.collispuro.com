
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dan Collis-Puro</title>
  <meta name="author" content="djcp">

  
  <meta name="description" content="This one was freaky! There was this girl that was going to save a planet from a war, two cultures were fighting each other, and she turned into a &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://cpblog.herokuapp.com/blog/page/5/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Dan Collis-Puro" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dan Collis-Puro</a></h1>
  
    <h2>Tech. Open Source. Stuff that doesn't suck..</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:cpblog.herokuapp.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/02/10/s2e10-the-dauphin/">S2:E10 - the Dauphin</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-02-10T00:00:00-05:00" pubdate data-updated="true">Feb 10<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote>This one was freaky! There was this girl that was going to save a planet from a war, two cultures were fighting each other, and she turned into a monster. Wesley was in love with her. The old monster was obsessed with protecting the younger one. The part where Riker and the lady from the bar were talking with each other like they were in love was weird, I couldn&#8217;t figure out if they were serious or not.</blockquote>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/28/s2e9-the-measure-of-a-man/">S2:E9 - the Measure of a Man</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-28T00:00:00-05:00" pubdate data-updated="true">Jan 28<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote>I could tell that Data really didn&#8217;t like the officer guy that wanted to take him apart.  I thought the episode was kind of boring because it was all politics and boring stuff like that. I want an adventure episode where they go on a different planet or something. I never thought of Data as an android. Well, he IS an android but he&#8217;s more than an android.</blockquote>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/28/openwrt-love/">OpenWRT, Rsync, and Linux Love</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-28T00:00:00-05:00" pubdate data-updated="true">Jan 28<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I use an rsync / hard link backup system of my own design (but similar in concept to <a href="http://www.mikerubel.org/computers/rsync_snapshots/">this</a>).  I have it providing 180 days of backups for numerous production machines spread around the internet, along with more permanent external backups provided by <a href="https://spideroak.com/download/referral/35ae0a5d9d4ed242e0871f5c00fed57b">spideroak</a> (referral link, but we both get free stuff if you sign up).  My internal backup system serves as my hot backups, so I want it available 24x7 via a remote file mount (sshfs) should I need it.</p>

<p>The machine I was running it on, though, was WAY overpowered and idles at around 70 watts - this was having a noticeable effect on our electricity bill.  So I put <a href="http://www.openwrt.org">openwrt</a> on my <a href="http://wiki.openwrt.org/toh/asus/wl500gp">asus wl500gp v2</a> and have that now doing my backups. It&#8217;s silent, fanless, and combined with a good external USB drive has as much storage as you can afford. It also idles at 5 watts total, device and USB drive combined!</p>

<p>Notes:</p>

<ul>
<li>The external drive is formatted for small files and inodes and a higher inode / block ratio. I just did &#8220;mkfs.ext -t small /dev/partition&#8221; from a full linux machine for the format - these options are a better fit the usage on an rsync / hard link backup system.</li>
    <li>I installed the openwrt image with the 2.4 kernel because it seems it has better hardware support for this device - it works great.</li>
    <li>I disabled the wlan and lan, leaving only the wan enabled with a static IP. I port forwarded an external port from my verizon router to allow ssh access from anywhere.</li>
    <li>I had to install openssh via opkg because the dropbear ssh client doesn&#8217;t support outgoing key auth, or if it does it doesn&#8217;t support openssh-style keys.</li>
    <li>I switched the default shell from ash to bash - just too many minor differences for me.</li>
    <li>rsync is available via opkg. Install it.</li>
    <li>cron is provided by busybox and has some minor differences in crontab syntax, I could not get @reboot jobs working.</li>
    <li>
<a href="http://wiki.openwrt.org/doc/howto/usb.storage">USB storage is fairly easy to set up</a>. I found, however, that the external device partitions were recognized at &#8220;/dev/discs/disc0/part1&#8221; instead of the more traditional &#8220;/dev/sda1&#8221; locations. No biggie, just odd.  You should read and implement the &#8220;start on boot&#8221; section.</li>
    <li>You can see syslog output via the command &#8220;logread&#8221;</li>
    <li>I needed to slow down the automount process via a &#8220;sleep&#8221; command  to allow the drive to spin up before mounting. <a href="https://forum.openwrt.org/viewtopic.php?id=27210">Details here.</a> Once I put in that delay, automount worked great.</li>
    <li>&#8220;find&#8221; provided by busybox is way limited compared to gnu find, and I can&#8217;t seem to locate gnu find in the otherwise complete openwrt repos. Busybox find can&#8217;t search based on modification times nor link counts - both key to how I implemented my backup system. I reap backup directories via their modification times to expire old backups. I installed ruby and ruby-core (which contains the ruby stdlib that provides file / directory classes) and wrote my own little timed reaper. Source is below.</li>
</ul>


<p>It&#8217;s working great so far - quiet, low-power and fast enough for me.</p>

<h2>Stupidly simple timed directory reaper written in ruby</h2>


<pre>
# expire_directories.rb. My backup directory names all look like "back-2012-01-27-04:44:05", 
# hence the regex along with the date check.
require 'find'
require 'fileutils'

days = ARGV[0]

Find.find('./') do |path|
  if FileTest.directory?(path)
    if path.scan('/').size == 1
      if path.match(/back/) && (File.stat(path).mtime 

invoked thusly:

<pre>cd /some/directory/that/contains/your/backup_directories && ruby ~/bin/expire_directories.rb 60</pre>

so pass it the number of days. Be sure you&#8217;re in the proper directory before running this, it&#8217;s doing an &#8220;rm -rf&#8221;.</pre>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/27/s2e8-a-matter-of-honor/">S2:E8 - a Matter of Honor</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-27T00:00:00-05:00" pubdate data-updated="true">Jan 27<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote>It was <strong>devastating</strong> when Riker grew the beard, he was cute when he didn&#8217;t have a beard. Now you tell me he&#8217;s going to get fat? I know him! He&#8217;s from the Academy (referring to Mendon, not Mendok)! Riker&#8217;s cool. Klingons seem a bit, I don&#8217;t know - that&#8217;s how they&#8217;re like. Crazy.  The food was gross.</blockquote>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/27/s2e7-unnatural-selection/">S2:E7 - Unnatural Selection</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-27T00:00:00-05:00" pubdate data-updated="true">Jan 27<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote>Captain Picard is a great captain, he has the perfect voice for it. I wanted to know what the telepathic kid was saying to her when they were in the shuttle. I still like Beverly Crusher better than Pulaski. It was obvious they needed to get the DNA from a hairbrush, I figured it out before them.</blockquote>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/27/s2e6-the-schizoid-man/">S2:E6 - the Schizoid Man</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-27T00:00:00-05:00" pubdate data-updated="true">Jan 27<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote>Right, a scientist is dying and he takes over Data - he has that girl, and the girl is in love with the scientist. Data is acting all weird, and it&#8217;s whatever.</blockquote>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/21/the-scientific-american-cyclopedia-of-formulas/">The Scientific American Cyclopedia of Formulas</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-21T00:00:00-05:00" pubdate data-updated="true">Jan 21<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I bet there are about 1000 ways to accidentally kill yourself or others in this book from 1910: <a href="http://books.google.com/books?id=ioNOAAAAMAAJ&pg=PP1#v=onepage&q&f=false">The Scientific American cyclopedia of formulas</a>.</p>

<p>It includes chapters on fireproofing, bleaching, metallurgy, brazing metals, insecticides(!) and opens (appropriately) with an excellent chapter on first aid in the 1910&#8217;s.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/01/openlibrary-org/">OpenLibrary.org</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-01T00:00:00-05:00" pubdate data-updated="true">Jan 1<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A heads up- <a href="http://www.openlibrary.org">openlibrary.org</a> has an amazing aggregation of free books and a promising looking API, which you can find more info about in the <a href="http://openlibrary.org/developers">developer center</a>. It looks like there is some amazing work happening in their <a href="https://github.com/openlibrary">github account</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/21/s2e5-loud-as-a-whisper/">S2:E5 - Loud as a Whisper</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-21T00:00:00-05:00" pubdate data-updated="true">Dec 21<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote>I feel bad for him. His friends died and he has to use sign language. He&#8217;s in love with Troi - he seems odd but he turns out to be a good guy. He thinks he&#8217;s so great and that&#8217;s why his friends die, because he thinks he can talk his way out of everything.</blockquote>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/21/s2e4-the-outrageous-okona/">S2:E4 - the Outrageous Okona</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-21T00:00:00-05:00" pubdate data-updated="true">Dec 21<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote>He&#8217;s totally Han Solo - they even call him a rogue. They think he&#8230; did stuff. He gets the two young people to marry, because the girl was mad at other boy so she lied about how the father of her baby was and wouldn&#8217;t marry him. It was a good ending, they got married.</blockquote>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/6/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/4/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/08/19/new-post/">A new octopress blog</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/18/wrap-up-of-my-first-week-at-thoughtbot/">Wrap-up of my first week at thoughtbot</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/30/s3e17-sins-of-the-father/">S3:E17 - Sins of the Father</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/30/s3e16-the-offspring/">S3:E16 - The Offspring</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/30/s318-allegiance/">S3:18 - Allegiance</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/djcp">@djcp</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'djcp',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("djcp", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/djcp" class="twitter-follow-button" data-show-count="false">Follow @djcp</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - djcp -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
