
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>How to move a wordpress multisite to a new "folder" - My Octopress Blog</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="Moving a wordpress multisite (a SINGLE site, not an entire install) to a new subfolder (not really a folder as it's virtual, but whatever) is not &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://yoursite.com/blog/2012/03/29/how-to-move-a-wordpress-multisite-to-a-new-folder/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="My Octopress Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">My Octopress Blog</a></h1>
  
    <h2>A blogging framework for hackers.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:yoursite.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">How to Move a Wordpress Multisite to a New "Folder"</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-29T00:00:00-04:00" pubdate data-updated="true">Mar 29<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Moving a wordpress multisite (a SINGLE site, not an entire install) to a new subfolder (not really a folder as it's virtual, but whatever) is not hard, but it's also not as easy as it should be. Here are the steps I took:</p>

<ol>
<li>Change the site path from the Network Admin backend, and be sure to have it update "siteurl" and "home". Make a note of the siteid while you're here, which you can deduce from the "id=" parameter in the URL.</li>
    <li>Regenerate the permalinks from the "Settings -> Permalinks" menu - I just temporarily switch the permalink structure to something else and right back again to the original settings - there's probably a more elegant way. If you're using a custom structure, be sure to note it before you change as it won't be retained in the text field.</li>
    <li>Fix all the links inside the content - I just used a mysql "update", like this:
<strong>update wp_<your multisite blog id>_posts set post_content = replace(post_content,'/oldpath/','/newpath/');
</strong>For bonus points, you can create a backup as a temporary table before the replace. Be aware this backup table will go away after you terminate your mysql connection.
<strong>create temporary table wp_<your multisite blog id>_posts_tmp select * from wp_<your multisite blog id>_posts;</strong>
This should fix all embedded media and page links - but you'll still need to test, obviously.</li>
    <li>Clear your object / apc caches by restarting apache and doing whatever else you need to clear your object cache backend. Since we're directly editing mysql tables, the object cache doesn't get the clues it needs to decache stale values and you can get weird issues. If you've got a frontend page cache, clear that too.</li>
</ol>


<p>These steps have worked fine here, but it's a bit more manual than I had hoped.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Your Name</span></span>

      








  


<time datetime="2012-03-29T00:00:00-04:00" pubdate data-updated="true">Mar 29<span>th</span>, 2012</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://yoursite.com/blog/2012/03/29/how-to-move-a-wordpress-multisite-to-a-new-folder/" data-via="" data-counturl="http://yoursite.com/blog/2012/03/29/how-to-move-a-wordpress-multisite-to-a-new-folder/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/03/22/feed-abstract-gem-updated-to-support-twitter-rss-and-atom/" title="Previous Post: feed-abstract gem updated to support twitter RSS and Atom">&laquo; feed-abstract gem updated to support twitter RSS and Atom</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/05/04/auto-unlock-bs-the-most-obnoxious-thing-i-have-seen-in-my-life/" title="Next Post: "Auto unlock" BS - the most obnoxious thing I have seen in my life.">"Auto unlock" BS - the most obnoxious thing I have seen in my life. &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/08/19/new-post/">A new octopress blog</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/18/wrap-up-of-my-first-week-at-thoughtbot/">Wrap-up of my first week at thoughtbot</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/30/s3e17-sins-of-the-father/">S3:E17 - Sins of the Father</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/30/s3e16-the-offspring/">S3:E16 - The Offspring</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/30/s318-allegiance/">S3:18 - Allegiance</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
